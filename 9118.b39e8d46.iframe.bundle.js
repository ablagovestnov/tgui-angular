(self.webpackChunktguiangular=self.webpackChunktguiangular||[]).push([[9118],{"./projects/tgui/src/lib/components/overlays/popper/components/floating-arrow/floating-arrow.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgY29sb3I6IGluaGVyaXQ7CiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICB6LWluZGV4OiAwOwogICAgfQoKICAgIDpob3N0LnBsYWNlbWVudC1yaWdodCB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSB0cmFuc2xhdGUoNTAlLCAtNTAlKTsKICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQ7CiAgICB9CgogICAgOmhvc3QucGxhY2VtZW50LWJvdHRvbSB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7CiAgICB9CgogICAgOmhvc3QucGxhY2VtZW50LWxlZnQgewogICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDsKICAgIH0KCiAgICAuaWNvbiB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTsKICAgIH0KICA%3D!./projects/tgui/src/lib/components/overlays/popper/components/floating-arrow/floating-arrow.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"\n    :host {\n      position: absolute;\n      color: inherit;\n      pointer-events: none;\n      z-index: 0;\n    }\n\n    :host.placement-right {\n      transform: rotate(90deg) translate(50%, -50%);\n      transform-origin: right;\n    }\n\n    :host.placement-bottom {\n      transform: rotate(180deg);\n    }\n\n    :host.placement-left {\n      transform: rotate(-90deg) translate(-50%, -50%);\n      transform-origin: left;\n    }\n\n    .icon {\n      display: block;\n      transform: translateY(1px);\n    }\n  ",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/tgui/src/lib/components/overlays/popper/popper.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>PopperComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),popper_component=__webpack_require__("./projects/tgui/src/lib/components/overlays/popper/popper.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAud3JhcHBlciB7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAwOwogICAgICBsZWZ0OiAwOwogICAgICB6LWluZGV4OiAxMDAwOwogICAgfQogIA%3D%3D!./projects/tgui/src/lib/components/overlays/popper/popper.component.ts"),popper_component_default=__webpack_require__.n(popper_component),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common_module_CBrzkrmd=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-CBrzkrmd.mjs"),floating_ui_dom=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),root_renderer_component=__webpack_require__("./projects/tgui/src/lib/components/utils/root-renderer/root-renderer.component.ts"),floating_arrow_component=__webpack_require__("./projects/tgui/src/lib/components/overlays/popper/components/floating-arrow/floating-arrow.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgY29sb3I6IGluaGVyaXQ7CiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICB6LWluZGV4OiAwOwogICAgfQoKICAgIDpob3N0LnBsYWNlbWVudC1yaWdodCB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSB0cmFuc2xhdGUoNTAlLCAtNTAlKTsKICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQ7CiAgICB9CgogICAgOmhvc3QucGxhY2VtZW50LWJvdHRvbSB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7CiAgICB9CgogICAgOmhvc3QucGxhY2VtZW50LWxlZnQgewogICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDsKICAgIH0KCiAgICAuaWNvbiB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTsKICAgIH0KICA%3D!./projects/tgui/src/lib/components/overlays/popper/components/floating-arrow/floating-arrow.component.ts"),floating_arrow_component_default=__webpack_require__.n(floating_arrow_component);let FloatingArrowComponent=class FloatingArrowComponent{elementRef=(0,core.inject)(core.ElementRef);DEFAULT_ARROW_WIDTH=22;DEFAULT_ARROW_HEIGHT=6;PLATFORM_HEIGHT=1;ARROW_HEIGHT_WITH_WHITE_SPACE=6+this.PLATFORM_HEIGHT;placement=(0,core.input)("bottom");offset=(0,core.input)(void 0);isStaticOffset=(0,core.input)(!1);coords=(0,core.input)(void 0);styles=(0,core.signal)({});_arrowPlacement=(0,core.signal)(null);arrowPlacement=(0,core.computed)((()=>this._arrowPlacement()));computedStyles=(0,core.computed)((()=>{const styleObj=this.styles();return Object.entries(styleObj).reduce(((acc,[key,value])=>(acc[key]="number"==typeof value?`${value}px`:value,acc)),{})}));ngOnInit(){this.updateArrowPosition()}ngAfterViewInit(){this.updateArrowPosition()}ngOnChanges(){this.updateArrowPosition()}updateArrowPosition(){console.log("ðŸŽ¯ updateArrowPosition called");const[arrowPlacement,styles]=function getArrowPositionData(placement,coords,offset=0,isStaticOffset=!1){console.log("ðŸŽ¯ getArrowPositionData called with:",{placement,coords,offset,isStaticOffset});const safeCoords=coords||{x:0,y:0},withOffset=isVerticalPlacement=>{const coordValue=isVerticalPlacement?safeCoords.y??0:safeCoords.x??0;return isStaticOffset?offset:coordValue+offset};return placement.includes("top")?(console.log('ðŸŽ¯ Placement includes "top" - setting arrowPlacement to "bottom"'),["bottom",{top:"100%",left:withOffset(!1)}]):placement.includes("right")?(console.log('ðŸŽ¯ Placement includes "right" - setting arrowPlacement to "left"'),["left",{top:withOffset(!0),left:0}]):placement.includes("bottom")?(console.log('ðŸŽ¯ Placement includes "bottom" - setting arrowPlacement to "top"'),["top",{bottom:"100%",left:withOffset(!1)}]):(console.log('ðŸŽ¯ Placement includes "left" - setting arrowPlacement to "right"'),["right",{top:withOffset(!0),right:0}])}(this.placement(),this.coords(),this.offset(),this.isStaticOffset());console.log("ðŸŽ¯ Setting arrow placement:",arrowPlacement),this._arrowPlacement.set(arrowPlacement),console.log("ðŸŽ¯ Setting arrow styles:",styles),this.styles.set(styles)}static propDecorators={placement:[{type:core.Input,args:[{isSignal:!0,alias:"placement",required:!1,transform:void 0}]}],offset:[{type:core.Input,args:[{isSignal:!0,alias:"offset",required:!1,transform:void 0}]}],isStaticOffset:[{type:core.Input,args:[{isSignal:!0,alias:"isStaticOffset",required:!1,transform:void 0}]}],coords:[{type:core.Input,args:[{isSignal:!0,alias:"coords",required:!1,transform:void 0}]}]}};FloatingArrowComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tgui-floating-arrow",standalone:!0,imports:[common_module_CBrzkrmd.MD],template:'\n    <svg\n      [attr.width]="DEFAULT_ARROW_WIDTH"\n      [attr.height]="ARROW_HEIGHT_WITH_WHITE_SPACE"\n      [attr.viewBox]="\'0 0 \' + DEFAULT_ARROW_WIDTH + \' \' + ARROW_HEIGHT_WITH_WHITE_SPACE"\n      xmlns="http://www.w3.org/2000/svg"\n      class="icon"\n    >\n      <path d="M10.804 0C6.387 0 6.94 6 .865 6h19.878c-6.074 0-5.521-6-9.939-6Z" fill="currentColor" />\n    </svg>\n  ',encapsulation:core.ViewEncapsulation.Emulated,changeDetection:core.ChangeDetectionStrategy.OnPush,host:{"[class.placement-right]":'arrowPlacement() === "right"',"[class.placement-bottom]":'arrowPlacement() === "bottom"',"[class.placement-left]":'arrowPlacement() === "left"',"[style]":"computedStyles()"},styles:[floating_arrow_component_default()]})],FloatingArrowComponent);let FloatingMiddlewaresService=class FloatingMiddlewaresService{getMiddlewares(options){const{placement="bottom-start",arrowRef=null,withArrow=!1,arrowHeight=0,arrowPadding=0,sameWidth=!1,offsetByMainAxis=0,offsetByCrossAxis=0,customMiddlewares=[]}=options,isNotAutoPlaced=(placement=>!placement.startsWith("auto"))(placement),middlewares=[],offsetConfig={crossAxis:offsetByCrossAxis,mainAxis:withArrow&&arrowHeight?offsetByMainAxis+arrowHeight:offsetByMainAxis};if(middlewares.push((0,floating_ui_dom.cY)(offsetConfig)),isNotAutoPlaced)middlewares.push((0,floating_ui_dom.UU)({fallbackAxisSideDirection:"start"}));else{const alignment=(placement=>{const align=placement.replace(/auto-|auto/,"");return"start"===align||"end"===align?align:null})(placement);middlewares.push((0,floating_ui_dom.RK)({alignment}))}middlewares.push((0,floating_ui_dom.BN)()),sameWidth&&middlewares.push((0,floating_ui_dom.Ej)({apply({rects,elements}){Object.assign(elements.floating.style,{width:`${rects.reference.width}px`})}})),customMiddlewares.length>0&&middlewares.push(...customMiddlewares),withArrow&&arrowRef?(console.log("ðŸš€ Adding arrow middleware with padding:",arrowPadding),middlewares.push((0,floating_ui_dom.UE)({element:arrowRef,padding:arrowPadding}))):withArrow&&!arrowRef&&console.log("ðŸš€ Warning: Arrow middleware not added because arrowRef is null");return{middlewares,strictPlacement:isNotAutoPlaced?placement:void 0}}};FloatingMiddlewaresService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],FloatingMiddlewaresService);const defaultOptions={ancestorScroll:!0,ancestorResize:!0,elementResize:!1,animationFrame:!1};const autoUpdateFloatingElement=(reference,floating,update,options=defaultOptions)=>{if(console.log("ðŸ“Œ autoUpdateFloatingElement called with:",{reference:reference?"provided":"null",floating:floating?"provided":"null",options}),!reference||!floating)return console.warn("ðŸ“Œ autoUpdateFloatingElement: Missing reference or floating element, returning no-op"),()=>{};const{elementResize=!1,...restOptions}=options;let autoUpdateLibDisposer;console.log("ðŸ“Œ autoUpdateFloatingElement options:",{elementResize,...restOptions});try{console.log("ðŸ“Œ Setting up autoUpdate from floating-ui library"),autoUpdateLibDisposer=(0,floating_ui_dom.ll)(reference,floating,(()=>{try{console.log("ðŸ“Œ autoUpdate callback triggered"),update()}catch(error){console.error("ðŸ“Œ Error in update callback:",error)}}),{...restOptions,elementResize:!1})}catch(error){return console.error("ðŸ“Œ Error setting up autoUpdate:",error),()=>{}}let observer=null;if(elementResize)try{console.log("ðŸ“Œ Setting up MutationObserver for element resize");let initialUpdate=!0;observer=new MutationObserver((()=>{if(console.log("ðŸ“Œ MutationObserver triggered, initialUpdate:",initialUpdate),!initialUpdate)try{update(),console.log("ðŸ“Œ Update called from MutationObserver")}catch(error){console.error("ðŸ“Œ Error in MutationObserver update:",error)}initialUpdate=!1})),!function isHTMLElement(value){return value instanceof HTMLElement}(reference)||function isVirtualElement(value){return null!==value&&"object"==typeof value&&"getBoundingClientRect"in value}(reference)?console.log("ðŸ“Œ Reference is not an HTML element or is a virtual element, not observing"):(console.log("ðŸ“Œ Observing reference element (HTML element)"),observer.observe(reference,{childList:!0,subtree:!0})),console.log("ðŸ“Œ Observing floating element"),observer.observe(floating,{childList:!0,subtree:!0})}catch(error){console.error("ðŸ“Œ Error setting up MutationObserver:",error),observer&&(observer.disconnect(),observer=null)}return()=>{console.log("ðŸ“Œ Cleanup function called for autoUpdateFloatingElement"),null!==observer&&(console.log("ðŸ“Œ Disconnecting MutationObserver"),observer.disconnect(),observer=null);try{console.log("ðŸ“Œ Calling autoUpdateLibDisposer"),autoUpdateLibDisposer()}catch(error){console.error("ðŸ“Œ Error in autoUpdateLibDisposer:",error)}console.log("ðŸ“Œ Cleanup complete")}};let PopperComponent=class PopperComponent{floatingMiddlewaresService=(0,core.inject)(FloatingMiddlewaresService);elementRef=(0,core.inject)(core.ElementRef);floatingEl;arrowEl;placement=(0,core.input)("auto");targetRef=(0,core.input)(null);sameWidth=(0,core.input)(!1);offsetByMainAxis=(0,core.input)(8);offsetByCrossAxis=(0,core.input)(0);withArrow=(0,core.input)(!0);arrowProps=(0,core.input)({});autoUpdateOnTargetResize=(0,core.input)(!1);customMiddlewares=(0,core.input)([]);popperCreated=(0,core.output)();popperUpdated=(0,core.output)();popperShown=(0,core.output)();cleanup=(0,core.signal)(null);_floatingStyles=(0,core.signal)({});_resolvedPlacement=(0,core.signal)("bottom");_arrowCoords=(0,core.signal)(void 0);_middlewareData=(0,core.signal)({});floatingStyles=(0,core.computed)((()=>this._floatingStyles()));resolvedPlacement=(0,core.computed)((()=>this._resolvedPlacement()));arrowCoords=(0,core.computed)((()=>this._arrowCoords()));arrowStyle=(0,core.computed)((()=>this.arrowProps()?.style||{}));arrowClassName=(0,core.computed)((()=>this.arrowProps()?.className||""));arrowHeight=(0,core.computed)((()=>this.arrowProps()?.height||6));arrowPadding=(0,core.computed)((()=>this.arrowProps()?.padding||12));ngAfterViewInit(){console.log("ðŸš€ PopperComponent ngAfterViewInit"),this.setupFloating()}ngOnDestroy(){this.cleanupFloating()}setupFloating(){if(!this.targetRef()||!this.floatingEl)return;const arrowElement=this.floatingEl.nativeElement.querySelector("tgui-floating-arrow");console.log("ðŸš€ Arrow element from querySelector:",arrowElement);const{middlewares,strictPlacement}=this.floatingMiddlewaresService.getMiddlewares({placement:this.placement(),sameWidth:this.sameWidth(),offsetByMainAxis:this.offsetByMainAxis(),offsetByCrossAxis:this.offsetByCrossAxis(),withArrow:this.withArrow(),arrowRef:arrowElement,arrowHeight:this.arrowHeight(),arrowPadding:this.arrowPadding(),customMiddlewares:this.customMiddlewares()}),update=()=>{this.targetRef()&&this.floatingEl&&(0,floating_ui_dom.rD)(this.targetRef(),this.floatingEl.nativeElement,{placement:strictPlacement,middleware:middlewares}).then((positionData=>{const{x,y,placement,middlewareData}=positionData;this._floatingStyles.set({left:`${x}px`,top:`${y}px`}),this._resolvedPlacement.set(placement),this._middlewareData.set(middlewareData),this._arrowCoords.set(middlewareData.arrow),console.log("ðŸš€ Arrow coordinates updated:",middlewareData.arrow),this.popperUpdated.emit(positionData),setTimeout((()=>{this.popperShown.emit()}),0)}))};update();const cleanupFn=autoUpdateFloatingElement(this.targetRef(),this.floatingEl.nativeElement,update,{elementResize:this.autoUpdateOnTargetResize()});this.cleanup.set(cleanupFn),this.popperCreated.emit({update,cleanup:cleanupFn,targetRef:this.targetRef(),floatingEl:this.floatingEl.nativeElement})}cleanupFloating(){this.cleanup()&&(this.cleanup()(),this.cleanup.set(null))}static propDecorators={floatingEl:[{type:core.ViewChild,args:["floatingEl"]}],arrowEl:[{type:core.ViewChild,args:["arrowEl"]}],placement:[{type:core.Input,args:[{isSignal:!0,alias:"placement",required:!1,transform:void 0}]}],targetRef:[{type:core.Input,args:[{isSignal:!0,alias:"targetRef",required:!1,transform:void 0}]}],sameWidth:[{type:core.Input,args:[{isSignal:!0,alias:"sameWidth",required:!1,transform:void 0}]}],offsetByMainAxis:[{type:core.Input,args:[{isSignal:!0,alias:"offsetByMainAxis",required:!1,transform:void 0}]}],offsetByCrossAxis:[{type:core.Input,args:[{isSignal:!0,alias:"offsetByCrossAxis",required:!1,transform:void 0}]}],withArrow:[{type:core.Input,args:[{isSignal:!0,alias:"withArrow",required:!1,transform:void 0}]}],arrowProps:[{type:core.Input,args:[{isSignal:!0,alias:"arrowProps",required:!1,transform:void 0}]}],autoUpdateOnTargetResize:[{type:core.Input,args:[{isSignal:!0,alias:"autoUpdateOnTargetResize",required:!1,transform:void 0}]}],customMiddlewares:[{type:core.Input,args:[{isSignal:!0,alias:"customMiddlewares",required:!1,transform:void 0}]}],popperCreated:[{type:core.Output,args:["popperCreated"]}],popperUpdated:[{type:core.Output,args:["popperUpdated"]}],popperShown:[{type:core.Output,args:["popperShown"]}]}};PopperComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tgui-popper",standalone:!0,imports:[common_module_CBrzkrmd.MD,root_renderer_component.D,FloatingArrowComponent],template:'\n    <tgui-root-renderer>\n      <div\n        #floatingEl\n        [ngStyle]="floatingStyles()"\n        class="wrapper"\n      >\n        <tgui-floating-arrow\n          *ngIf="withArrow()"\n          #arrowEl\n          [placement]="resolvedPlacement()"\n          [coords]="arrowCoords()"\n          [style]="arrowStyle()"\n          [class]="arrowClassName()"\n        ></tgui-floating-arrow>\n        <ng-content></ng-content>\n      </div>\n    </tgui-root-renderer>\n  ',encapsulation:core.ViewEncapsulation.Emulated,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[popper_component_default()]})],PopperComponent)},"./projects/tgui/src/lib/components/overlays/popper/popper.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAud3JhcHBlciB7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAwOwogICAgICBsZWZ0OiAwOwogICAgICB6LWluZGV4OiAxMDAwOwogICAgfQogIA%3D%3D!./projects/tgui/src/lib/components/overlays/popper/popper.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"\n    .wrapper {\n      position: absolute;\n      top: 0;\n      left: 0;\n      z-index: 1000;\n    }\n  ",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/tgui/src/lib/components/utils/root-renderer/root-renderer.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>RootRendererComponent});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_services__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./projects/tgui/src/lib/services/portal.service.ts");let RootRendererComponent=class RootRendererComponent{contentTemplate;portalService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_services__WEBPACK_IMPORTED_MODULE_1__._);viewContainerRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef);viewRef=null;constructor(){}ngAfterViewInit(){const portalContainer=this.portalService.getPortalContainerElement();portalContainer&&(this.viewRef=this.viewContainerRef.createEmbeddedView(this.contentTemplate),this.viewRef.rootNodes.forEach((node=>{portalContainer.appendChild(node)})))}ngOnDestroy(){if(this.viewRef)try{this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.viewRef))}catch(e){console.error("Error cleaning up root renderer view:",e)}}static ctorParameters=()=>[];static propDecorators={contentTemplate:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,args:["contentTemplate",{static:!0}]}]}};RootRendererComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Component)({selector:"tgui-root-renderer",template:"\n    <ng-template #contentTemplate>\n      <ng-content></ng-content>\n    </ng-template>\n  ",standalone:!0,changeDetection:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,encapsulation:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewEncapsulation.Emulated})],RootRendererComponent)}}]);