(self.webpackChunktguiangular=self.webpackChunktguiangular||[]).push([[9053],{"./projects/tgui/src/lib/components/overlays/popper/popper.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>PopperComponent});var _Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICAudGd1aS1wb3BwZXIgewogICAgICB6LWluZGV4OiAxMDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB9CiAgICAKICAgIC50Z3VpLXBvcHBlci1ib2R5IHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGd1aS1jb2xvci1iYWNrZ3JvdW5kKTsKICAgICAgY29sb3I6IHZhcigtLXRndWktY29sb3ItdGV4dCk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4wOCksIDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAuMDgpOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgCiAgICAudGd1aS1wb3BwZXItLWlvcyAudGd1aS1wb3BwZXItYm9keSB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgICB9CiAg_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./projects/tgui/src/lib/components/overlays/popper/popper.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAudGd1aS1wb3BwZXIgewogICAgICB6LWluZGV4OiAxMDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB9CiAgICAKICAgIC50Z3VpLXBvcHBlci1ib2R5IHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGd1aS1jb2xvci1iYWNrZ3JvdW5kKTsKICAgICAgY29sb3I6IHZhcigtLXRndWktY29sb3ItdGV4dCk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4wOCksIDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAuMDgpOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgCiAgICAudGd1aS1wb3BwZXItLWlvcyAudGd1aS1wb3BwZXItYm9keSB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgICB9CiAg!./projects/tgui/src/lib/components/overlays/popper/popper.component.ts"),_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICAudGd1aS1wb3BwZXIgewogICAgICB6LWluZGV4OiAxMDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB9CiAgICAKICAgIC50Z3VpLXBvcHBlci1ib2R5IHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGd1aS1jb2xvci1iYWNrZ3JvdW5kKTsKICAgICAgY29sb3I6IHZhcigtLXRndWktY29sb3ItdGV4dCk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4wOCksIDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAuMDgpOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgCiAgICAudGd1aS1wb3BwZXItLWlvcyAudGd1aS1wb3BwZXItYm9keSB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgICB9CiAg_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICAudGd1aS1wb3BwZXIgewogICAgICB6LWluZGV4OiAxMDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB9CiAgICAKICAgIC50Z3VpLXBvcHBlci1ib2R5IHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGd1aS1jb2xvci1iYWNrZ3JvdW5kKTsKICAgICAgY29sb3I6IHZhcigtLXRndWktY29sb3ItdGV4dCk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4wOCksIDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAuMDgpOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgCiAgICAudGd1aS1wb3BwZXItLWlvcyAudGd1aS1wb3BwZXItYm9keSB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgICB9CiAg_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts__WEBPACK_IMPORTED_MODULE_9__),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/common/fesm2022/xhr-BfNfxNDv.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-CBrzkrmd.mjs"),_utils_portal_root_portal_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./projects/tgui/src/lib/components/utils/portal/root-portal.component.ts"),_services__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./projects/tgui/src/lib/services/platform.service.ts"),_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./projects/tgui/src/lib/services/portal.service.ts"),_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs");let PopperComponent=class PopperComponent{elementRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef);platformId=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.PLATFORM_ID);platformService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_services__WEBPACK_IMPORTED_MODULE_1__.f);portalService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_services__WEBPACK_IMPORTED_MODULE_2__._);updatePositionHandler=()=>{};popperElement;contentTemplate;ngAfterViewInit(){}targetRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(null);placement=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)("bottom");strategy=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)("absolute");offsetByMainAxis=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(8);offsetByCrossAxis=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(0);sameWidth=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);flip=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!0);shift=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!0);autoPlacement=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);hide=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);visible=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!0);position=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)({top:0,left:0});isHidden=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)(!1);strictPlacement=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.computed)((()=>this.autoPlacement()?"auto-start":this.placement()));middlewares=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.computed)((()=>{const middlewares=[];if(0===this.offsetByMainAxis()&&0===this.offsetByCrossAxis()||middlewares.push((0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.cY)({mainAxis:this.offsetByMainAxis(),crossAxis:this.offsetByCrossAxis()})),this.autoPlacement()&&middlewares.push((0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.RK)()),this.flip()&&middlewares.push((0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.UU)()),this.shift()&&middlewares.push((0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.BN)({padding:8})),this.sameWidth()){const self=this;middlewares.push((0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.Ej)({apply({rects}){const currentPosition=self.position();self.position.set({...currentPosition,targetWidth:rects.reference.width})}}))}return this.hide()&&middlewares.push((0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.jD)()),middlewares}));constructor(){(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.effect)((()=>{if(!(0,_angular_common__WEBPACK_IMPORTED_MODULE_4__.UE)(this.platformId))return;if(!this.visible())return;const targetElement=this.targetRef();return targetElement?(this.findPortalContainerAndSetupPopper(targetElement),()=>{window.removeEventListener("scroll",this.updatePositionHandler),window.removeEventListener("resize",this.updatePositionHandler)}):void 0}))}findPortalContainerAndSetupPopper(targetElement,retryCount=0){const portalContainer=this.portalService.getPortalContainerElement();portalContainer?setTimeout((()=>{const poppers=portalContainer.querySelectorAll(".tgui-popper");if(console.log("Found popper elements in portal:",poppers.length),0===poppers.length)return void(retryCount<5?(console.log(`No popper elements found, retrying (${retryCount+1}/5)...`),setTimeout((()=>{this.findPortalContainerAndSetupPopper(targetElement,retryCount+1)}),100)):console.error("No popper elements found after multiple attempts"));const popperElement=poppers[poppers.length-1];this.setupPositioning(targetElement,popperElement)}),50):retryCount<5?(console.log(`Portal container not available, retrying (${retryCount+1}/5)...`),setTimeout((()=>{this.findPortalContainerAndSetupPopper(targetElement,retryCount+1)}),100)):console.error("Portal container not available after multiple attempts")}setupPositioning(targetElement,floating){console.log("setupPositioning with floating element:",floating),this.updatePosition(targetElement,floating),window.removeEventListener("scroll",this.updatePositionHandler),window.removeEventListener("resize",this.updatePositionHandler),this.updatePositionHandler=()=>this.updatePosition(targetElement,floating),window.addEventListener("scroll",this.updatePositionHandler,{passive:!0}),window.addEventListener("resize",this.updatePositionHandler,{passive:!0})}updatePosition(reference,floating){var _this=this;return(0,_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.A)((function*(){if(reference&&floating)try{floating.style.position=_this.strategy();const{x,y,middlewareData}=yield(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.rD)(reference,floating,{placement:_this.strictPlacement(),strategy:_this.strategy(),middleware:_this.middlewares()});document.body.offsetHeight,_this.position.set({top:y,left:x,middlewareData,targetWidth:_this.position().targetWidth}),_this.isHidden.set(!!middlewareData.hide?.referenceHidden)}catch(error){console.error("Failed to compute position:",error)}}))()}static ctorParameters=()=>[];static propDecorators={popperElement:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,args:["popperElement"]}],contentTemplate:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ContentChild,args:["content"]}],targetRef:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"targetRef",required:!1,transform:void 0}]}],placement:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"placement",required:!1,transform:void 0}]}],strategy:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"strategy",required:!1,transform:void 0}]}],offsetByMainAxis:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"offsetByMainAxis",required:!1,transform:void 0}]}],offsetByCrossAxis:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"offsetByCrossAxis",required:!1,transform:void 0}]}],sameWidth:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"sameWidth",required:!1,transform:void 0}]}],flip:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"flip",required:!1,transform:void 0}]}],shift:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"shift",required:!1,transform:void 0}]}],autoPlacement:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"autoPlacement",required:!1,transform:void 0}]}],hide:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"hide",required:!1,transform:void 0}]}],visible:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"visible",required:!1,transform:void 0}]}]}};PopperComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_6__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Component)({selector:"tgui-popper",standalone:!0,imports:[_angular_common__WEBPACK_IMPORTED_MODULE_7__.MD,_utils_portal_root_portal_component__WEBPACK_IMPORTED_MODULE_8__.A],template:'\n    <tgui-root-portal *ngIf="visible()">\n      <div \n        #popperElement\n        class="tgui-popper"\n        [class.tgui-popper--ios]="platformService.isIOS()"\n        [style.position]="\'absolute\'"\n        [style.top]="position().top + \'px\'"\n        [style.left]="position().left + \'px\'"\n        [style.width]="sameWidth() ? position().targetWidth + \'px\' : \'auto\'"\n        [style.visibility]="isHidden() ? \'hidden\' : \'visible\'"\n        [style.maxWidth]="\'calc(100vw - 16px)\'"\n        [style.maxHeight]="\'calc(100vh - 16px)\'">\n        <div class="tgui-popper-body">\n          <ng-content></ng-content>\n          <ng-container *ngIf="contentTemplate" [ngTemplateOutlet]="contentTemplate"></ng-container>\n        </div>\n      </div>\n    </tgui-root-portal>\n  ',encapsulation:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewEncapsulation.Emulated,changeDetection:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,styles:[_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICAudGd1aS1wb3BwZXIgewogICAgICB6LWluZGV4OiAxMDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB9CiAgICAKICAgIC50Z3VpLXBvcHBlci1ib2R5IHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGd1aS1jb2xvci1iYWNrZ3JvdW5kKTsKICAgICAgY29sb3I6IHZhcigtLXRndWktY29sb3ItdGV4dCk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4wOCksIDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAuMDgpOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgCiAgICAudGd1aS1wb3BwZXItLWlvcyAudGd1aS1wb3BwZXItYm9keSB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgICB9CiAg_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_overlays_popper_popper_component_ts__WEBPACK_IMPORTED_MODULE_9___default()]})],PopperComponent)},"./projects/tgui/src/lib/components/overlays/popper/popper.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAudGd1aS1wb3BwZXIgewogICAgICB6LWluZGV4OiAxMDA7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB9CiAgICAKICAgIC50Z3VpLXBvcHBlci1ib2R5IHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGd1aS1jb2xvci1iYWNrZ3JvdW5kKTsKICAgICAgY29sb3I6IHZhcigtLXRndWktY29sb3ItdGV4dCk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4wOCksIDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAuMDgpOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiAxMDAlOwogICAgfQogICAgCiAgICAudGd1aS1wb3BwZXItLWlvcyAudGd1aS1wb3BwZXItYm9keSB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgICB9CiAg!./projects/tgui/src/lib/components/overlays/popper/popper.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"\n    .tgui-popper {\n      z-index: 100;\n      box-sizing: border-box;\n    }\n    \n    .tgui-popper-body {\n      background-color: var(--tgui-color-background);\n      color: var(--tgui-color-text);\n      border-radius: 12px;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, .08), 0 4px 12px rgba(0, 0, 0, .08);\n      overflow: auto;\n      max-width: 100%;\n      max-height: 100%;\n    }\n    \n    .tgui-popper--ios .tgui-popper-body {\n      border-radius: 14px;\n    }\n  ",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/tgui/src/lib/components/overlays/popper/story/touch.popper.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_popper_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./projects/tgui/src/lib/components/overlays/popper/popper.component.ts"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_utils_touch_touch_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./projects/tgui/src/lib/components/utils/touch/touch.component.ts"),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-CBrzkrmd.mjs"),_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./projects/tgui/src/lib/services/platform.service.ts");let TouchPopperDemoComponent=class TouchPopperDemoComponent{platformService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_services__WEBPACK_IMPORTED_MODULE_2__.f);showPopper=!1;placement="top";offsetByMainAxis=8;flip=!0;shift=!0;touchPosition={x:0,y:0};popperTimerId=null;lastTouchTarget=null;virtualElement={getBoundingClientRect:()=>({width:5,height:5,top:this.touchPosition.y,right:this.touchPosition.x+5,bottom:this.touchPosition.y+5,left:this.touchPosition.x,x:this.touchPosition.x,y:this.touchPosition.y})};handleTouch(event){const wasShowing=this.showPopper;this.hidePopper(),this.touchPosition={x:event.startX,y:event.startY},setTimeout((()=>{this.showPopper=!0,this.popperTimerId=window.setTimeout((()=>{this.hidePopper()}),3e3),this.lastTouchTarget=event.originalEvent.target}),wasShowing?50:0)}hidePopper(){this.showPopper=!1,null!==this.popperTimerId&&(window.clearTimeout(this.popperTimerId),this.popperTimerId=null)}onDocumentClick(event){if(event.target===this.lastTouchTarget)return;!event.composedPath().some((element=>element instanceof HTMLElement&&element.classList.contains("tgui-popper-body")))&&this.showPopper&&this.hidePopper()}};TouchPopperDemoComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"tgui-touch-popper-demo",standalone:!0,imports:[_popper_component__WEBPACK_IMPORTED_MODULE_4__.Y,_utils_touch_touch_component__WEBPACK_IMPORTED_MODULE_5__.d,_angular_common__WEBPACK_IMPORTED_MODULE_6__.MD],template:'\n    <div style="padding: 16px; display: flex; flex-direction: column; gap: 16px;">\n      <h3 style="margin: 0 0 8px 0; color: #333;">Interactive Touch Popper</h3>\n      <p style="margin: 0 0 16px 0; color: #666;">Touch or click anywhere in the area below to see the popper appear at that exact location.</p>\n      \n      <div style="position: relative;">\n        <tgui-touch\n          (onStart)="handleTouch($event)"\n          style="display: block; width: 100%; height: 300px; background-color: #f7f7f7; border: 1px dashed #ccc; border-radius: 12px; display: flex; align-items: center; justify-content: center; user-select: none; overflow: hidden;">\n          <div style="text-align: center; color: #666; display: flex; flex-direction: column; align-items: center; gap: 8px;">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M8 16L12 12M12 12L16 16M12 12V21M20 16.7428C21.2215 15.734 22 14.2079 22 12.5C22 9.46243 19.5376 7 16.5 7C16.2815 7 16.0771 6.886 15.9661 6.69774C14.6621 4.48484 12.2544 3 9.5 3C5.35786 3 2 6.35786 2 10.5C2 12.5661 2.83545 14.4371 4.18695 15.7935" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n            <span>Touch anywhere in this area</span>\n          </div>\n          <tgui-popper\n          *ngIf="showPopper"\n          [targetRef]="virtualElement"\n          [placement]="placement"\n          [offsetByMainAxis]="offsetByMainAxis"\n          [flip]="flip"\n          [shift]="shift">\n          <div style="padding: 16px; min-width: 180px; max-width: 250px;">\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n              <p style="margin: 0; padding: 0; font-weight: bold; font-size: 14px;">Touch Position</p>\n              <button \n                style="background: none; border: none; cursor: pointer; padding: 2px; color: #999; font-size: 18px; line-height: 1;"\n                (click)="hidePopper()"\n                title="Close">\n                ×\n              </button>\n            </div>\n            <div style="display: flex; gap: 8px; align-items: center; font-size: 13px; color: #666; margin-bottom: 8px;">\n              <div style="width: 6px; height: 6px; background-color: #4285F4; border-radius: 50%;"></div>\n              <span>X: {{ touchPosition.x | number:\'1.0-0\' }}</span>\n            </div>\n            <div style="display: flex; gap: 8px; align-items: center; font-size: 13px; color: #666;">\n              <div style="width: 6px; height: 6px; background-color: #EA4335; border-radius: 50%;"></div>\n              <span>Y: {{ touchPosition.y | number:\'1.0-0\' }}</span>\n            </div>\n          </div>\n        </tgui-popper>\n        </tgui-touch>\n        \n      </div>\n      \n      <div style="margin-top: 8px; padding: 12px; background-color: #f0f0f0; border-radius: 8px; font-size: 13px; color: #666;">\n        <p style="margin: 0; font-style: italic;">The popper will automatically hide after 3 seconds or when you click elsewhere.</p>\n      </div>\n    </div>\n  ',host:{"(document:click)":"onDocumentClick($event)"}})],TouchPopperDemoComponent);const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Overlays/Popper/Touch",component:TouchPopperDemoComponent,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[_popper_component__WEBPACK_IMPORTED_MODULE_4__.Y,_utils_touch_touch_component__WEBPACK_IMPORTED_MODULE_5__.d,_angular_common__WEBPACK_IMPORTED_MODULE_6__.MD]})],argTypes:{placement:{control:"select",options:["top","bottom","left","right"],description:"The preferred placement of the popper",defaultValue:"top"},offsetByMainAxis:{control:{type:"number",min:0,max:32,step:2},description:"Offset along the main axis (in pixels)",defaultValue:8},flip:{control:"boolean",description:"Whether the popper should flip to the opposite side when it overflows",defaultValue:!0},shift:{control:"boolean",description:"Whether the popper should shift to stay in view when it would overflow",defaultValue:!0}},parameters:{layout:"centered",docs:{description:{component:"Interactive Touch Popper shows how to display a popper at the exact location where a user touches or clicks on the screen."}}}},Default={parameters:{docs:{description:{story:"This example shows how to use the Popper component with a touch zone. The popper appears at the exact location where the user clicks or taps and automatically disappears after 3 seconds or when clicking outside of it."}}}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  parameters: {\n    docs: {\n      description: {\n        story: 'This example shows how to use the Popper component with a touch zone. The popper appears at the exact location where the user clicks or taps and automatically disappears after 3 seconds or when clicking outside of it.'\n      }\n    }\n  }\n}",...Default.parameters?.docs?.source}}}},"./projects/tgui/src/lib/components/utils/portal/root-portal.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>RootPortalComponent});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS10Z3VpLS1mb250LWZhbWlseSk7CiAgICB9CiAgICAKICAgIDpob3N0OjpuZy1kZWVwICogewogICAgICBmb250LWZhbWlseTogdmFyKC0tdGd1aS0tZm9udC1mYW1pbHkpOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./projects/tgui/src/lib/components/utils/portal/root-portal.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS10Z3VpLS1mb250LWZhbWlseSk7CiAgICB9CiAgICAKICAgIDpob3N0OjpuZy1kZWVwICogewogICAgICBmb250LWZhbWlseTogdmFyKC0tdGd1aS0tZm9udC1mYW1pbHkpOwogICAgfQogIA%3D%3D!./projects/tgui/src/lib/components/utils/portal/root-portal.component.ts"),_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS10Z3VpLS1mb250LWZhbWlseSk7CiAgICB9CiAgICAKICAgIDpob3N0OjpuZy1kZWVwICogewogICAgICBmb250LWZhbWlseTogdmFyKC0tdGd1aS0tZm9udC1mYW1pbHkpOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS10Z3VpLS1mb250LWZhbWlseSk7CiAgICB9CiAgICAKICAgIDpob3N0OjpuZy1kZWVwICogewogICAgICBmb250LWZhbWlseTogdmFyKC0tdGd1aS0tZm9udC1mYW1pbHkpOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts__WEBPACK_IMPORTED_MODULE_4__),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./projects/tgui/src/lib/services/portal.service.ts");let RootPortalComponent=class RootPortalComponent{contentTemplate;destroy$=new rxjs__WEBPACK_IMPORTED_MODULE_0__.B;viewRef=null;templateReady=!1;portalService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_services__WEBPACK_IMPORTED_MODULE_2__._);viewContainerRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewContainerRef);cdr=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ChangeDetectorRef);constructor(){(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.effect)((()=>{const container=this.portalService.portalContainer();if(this.templateReady&&this.contentTemplate){if(this.viewRef){try{this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.viewRef))}catch(e){console.error("Error removing portal view:",e)}this.viewRef=null}if(container&&container.nativeElement)try{this.viewRef=this.viewContainerRef.createEmbeddedView(this.contentTemplate),this.cdr.detectChanges(),this.viewRef.rootNodes.forEach((node=>{node instanceof HTMLElement&&(node.style.fontFamily="var(--tgui--font-family)"),container.nativeElement.appendChild(node)}))}catch(e){console.error("Error creating portal view:",e)}else console.warn("No portal container available")}}))}ngAfterViewInit(){this.cdr.detectChanges(),this.templateReady=!0,setTimeout((()=>{const container=this.portalService.portalContainer();container&&(this.portalService.clearPortalContainer(),setTimeout((()=>{this.portalService.setPortalContainer(container)}),0))}),0)}ngOnDestroy(){if(this.destroy$.next(),this.destroy$.complete(),this.viewRef)try{this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.viewRef))}catch(e){console.error("Error cleaning up portal view:",e)}}static ctorParameters=()=>[];static propDecorators={contentTemplate:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewChild,args:["contentTemplate",{static:!0}]}]}};RootPortalComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"tgui-root-portal",template:"\n    <ng-template #contentTemplate>\n      <ng-content></ng-content>\n    </ng-template>\n  ",standalone:!0,changeDetection:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ChangeDetectionStrategy.OnPush,styles:[_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS10Z3VpLS1mb250LWZhbWlseSk7CiAgICB9CiAgICAKICAgIDpob3N0OjpuZy1kZWVwICogewogICAgICBmb250LWZhbWlseTogdmFyKC0tdGd1aS0tZm9udC1mYW1pbHkpOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_portal_root_portal_component_ts__WEBPACK_IMPORTED_MODULE_4___default()]})],RootPortalComponent)},"./projects/tgui/src/lib/components/utils/portal/root-portal.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS10Z3VpLS1mb250LWZhbWlseSk7CiAgICB9CiAgICAKICAgIDpob3N0OjpuZy1kZWVwICogewogICAgICBmb250LWZhbWlseTogdmFyKC0tdGd1aS0tZm9udC1mYW1pbHkpOwogICAgfQogIA%3D%3D!./projects/tgui/src/lib/components/utils/portal/root-portal.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"\n    :host {\n      font-family: var(--tgui--font-family);\n    }\n    \n    :host::ng-deep * {\n      font-family: var(--tgui--font-family);\n    }\n  ",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/tgui/src/lib/components/utils/touch/touch.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>TouchComponent});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./projects/tgui/src/lib/components/utils/touch/touch.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOwogICAgfQogIA%3D%3D!./projects/tgui/src/lib/components/utils/touch/touch.component.ts"),_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts__WEBPACK_IMPORTED_MODULE_3__),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-CBrzkrmd.mjs");let TouchComponent=class TouchComponent{elementRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef);renderer=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2);usePointerHover=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);useCapture=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);slideThreshold=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(5);noSlideClick=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);stopPropagation=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.input)(!1);onEnter=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onLeave=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onStart=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onStartX=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onStartY=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onMove=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onMoveX=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onMoveY=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onEnd=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onEndX=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();onEndY=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.output)();gesture=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)(null);didSlide=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)(!1);supportedEvents=this.getSupportedEvents();permanentUnlisteners=[];moveEndUnlisteners=[];touchEnabled(){return"undefined"!=typeof window&&"ontouchstart"in window}getSupportedEvents(){return this.touchEnabled()?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"]}initGesture(startX,startY){return{startX,startY,startT:new Date,duration:0,isPressed:!0,isY:!1,isX:!1,isSlideX:!1,isSlideY:!1,isSlide:!1,clientX:0,clientY:0,shiftX:0,shiftY:0,shiftXAbs:0,shiftYAbs:0}}coordX(e){return null!=e.clientX?e.clientX:e.changedTouches?.[0]?.clientX||0}coordY(e){return null!=e.clientY?e.clientY:e.changedTouches?.[0]?.clientY||0}ngOnInit(){this.setupListeners()}ngOnDestroy(){this.removeAllListeners()}setupListeners(){this.usePointerHover()&&(this.addPermanentEventListener(this.usePointerHover()?"pointerenter":"mouseenter",(e=>this.handleHoverEnter(e))),this.addPermanentEventListener(this.usePointerHover()?"pointerleave":"mouseleave",(e=>this.handleHoverLeave(e)))),this.addPermanentEventListener(this.supportedEvents[0],(e=>this.handleStart(e)))}handleStart(e){const newGesture=this.initGesture(this.coordX(e),this.coordY(e));this.gesture.set(newGesture),this.handleGestureEvent(e,[this.onStart,this.onStartX,this.onStartY]);const targetElement=this.touchEnabled()?e.target:window.document;this.addDocumentEventListeners(targetElement)}addDocumentEventListeners(target){const moveListener=this.renderer.listen(target,this.supportedEvents[1],(e=>this.handleMove(e))),endListener=this.renderer.listen(target,this.supportedEvents[2],(e=>this.handleEnd(e))),cancelListener=this.renderer.listen(target,this.supportedEvents[3],(e=>this.handleEnd(e)));this.moveEndUnlisteners.push(moveListener,endListener,cancelListener)}handleMove(e){const currentGesture=this.gesture();if(!currentGesture?.isPressed)return;const{isPressed,isX,isY,startX=0,startY=0}=currentGesture;if(isPressed){const clientX=this.coordX(e),clientY=this.coordY(e),shiftX=clientX-startX,shiftY=clientY-startY,shiftXAbs=Math.abs(shiftX),shiftYAbs=Math.abs(shiftY);if(e.touches&&e.touches.length>1)return void this.handleEnd(e);if(!isX&&!isY){const willBeX=shiftXAbs>=this.slideThreshold()&&shiftXAbs>shiftYAbs,willBeY=shiftYAbs>=this.slideThreshold()&&shiftYAbs>shiftXAbs,willBeSlidedX=willBeX&&this.hasListeners(this.onMoveX)||this.hasListeners(this.onMove),willBeSlidedY=willBeY&&this.hasListeners(this.onMoveY)||this.hasListeners(this.onMove);this.gesture.update((g=>g?{...g,isY:willBeY,isX:willBeX,isSlideX:willBeSlidedX,isSlideY:willBeSlidedY,isSlide:willBeSlidedX||willBeSlidedY}:g))}const updatedGesture=this.gesture();updatedGesture?.isSlide&&(this.gesture.update((g=>g?{...g,clientX,clientY,shiftX,shiftY,shiftXAbs,shiftYAbs}:g)),this.handleGestureEvent(e,[this.onMove,updatedGesture.isSlideX?this.onMoveX:null,updatedGesture.isSlideY?this.onMoveY:null]))}}hasListeners(emitter){return!0}handleEnd(e){const currentGesture=this.gesture(),{isPressed,isSlide,isSlideX,isSlideY}=currentGesture||{};isPressed&&this.handleGestureEvent(e,[this.onEnd,isSlideY?this.onEndY:null,isSlideX?this.onEndX:null]),this.touchEnabled()&&isSlide?this.didSlide.set(!1):this.didSlide.set(Boolean(isSlide)),this.gesture.set({}),this.touchEnabled()&&this.hasListeners(this.onLeave)&&this.onLeave.emit(e),this.removeMoveEndListeners()}handleHoverEnter(e){this.hasListeners(this.onEnter)&&this.onEnter.emit(e)}handleHoverLeave(e){this.hasListeners(this.onLeave)&&this.onLeave.emit(e)}handleGestureEvent(e,handlers){this.stopPropagation()&&e.stopPropagation(),handlers.forEach((emitter=>{if(!emitter||!this.hasListeners(emitter))return;const currentGesture=this.gesture();if(!currentGesture)return;const duration=Date.now()-(currentGesture.startT?.getTime()??0),touchEvent={startX:currentGesture.startX??0,startY:currentGesture.startY??0,startT:currentGesture.startT??new Date,duration,isPressed:currentGesture.isPressed??!1,isY:currentGesture.isY??!1,isX:currentGesture.isX??!1,isSlideX:currentGesture.isSlideX??!1,isSlideY:currentGesture.isSlideY??!1,isSlide:currentGesture.isSlide??!1,clientX:currentGesture.clientX??0,clientY:currentGesture.clientY??0,shiftX:currentGesture.shiftX??0,shiftY:currentGesture.shiftY??0,shiftXAbs:currentGesture.shiftXAbs??0,shiftYAbs:currentGesture.shiftYAbs??0,originalEvent:e};emitter.emit(touchEvent)}))}addPermanentEventListener(eventName,handler){const unlistener=this.renderer.listen(this.elementRef.nativeElement,eventName,(e=>handler(e)));this.permanentUnlisteners.push(unlistener)}removeMoveEndListeners(){this.moveEndUnlisteners.forEach((unlisten=>unlisten())),this.moveEndUnlisteners=[]}removeAllListeners(){this.removeMoveEndListeners(),this.permanentUnlisteners.forEach((unlisten=>unlisten())),this.permanentUnlisteners=[]}onClick(e){this.didSlide()&&(this.noSlideClick()&&(e.stopPropagation(),e.preventDefault()),this.didSlide.set(!1))}onDragStart(e){const target=e.target;"A"!==target.tagName&&"IMG"!==target.tagName||e.preventDefault()}static propDecorators={usePointerHover:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"usePointerHover",required:!1,transform:void 0}]}],useCapture:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"useCapture",required:!1,transform:void 0}]}],slideThreshold:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"slideThreshold",required:!1,transform:void 0}]}],noSlideClick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"noSlideClick",required:!1,transform:void 0}]}],stopPropagation:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:[{isSignal:!0,alias:"stopPropagation",required:!1,transform:void 0}]}],onEnter:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onEnter"]}],onLeave:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onLeave"]}],onStart:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onStart"]}],onStartX:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onStartX"]}],onStartY:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onStartY"]}],onMove:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onMove"]}],onMoveX:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onMoveX"]}],onMoveY:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onMoveY"]}],onEnd:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onEnd"]}],onEndX:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onEndX"]}],onEndY:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output,args:["onEndY"]}],onClick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["click",["$event"]]}],onDragStart:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["dragstart",["$event"]]}]}};TouchComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Component)({selector:"tgui-touch",standalone:!0,imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.MD],template:"<ng-content></ng-content>",encapsulation:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewEncapsulation.Emulated,changeDetection:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,schemas:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.CUSTOM_ELEMENTS_SCHEMA],styles:[_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts_css_ngResource_Users_ablagovestnov_CursorProjects_TGUIAngular_node_modules_ngtools_webpack_src_loaders_inline_resource_js_data_CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOwogICAgfQogIA_3D_3D_Users_ablagovestnov_CursorProjects_TGUIAngular_projects_tgui_src_lib_components_utils_touch_touch_component_ts__WEBPACK_IMPORTED_MODULE_3___default()]})],TouchComponent)},"./projects/tgui/src/lib/components/utils/touch/touch.component.ts.css?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOwogICAgfQogIA%3D%3D!./projects/tgui/src/lib/components/utils/touch/touch.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"\n    :host {\n      display: block;\n      position: relative;\n      touch-action: manipulation;\n    }\n  ",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);